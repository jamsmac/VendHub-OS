# Детальные потоки VendHub скиллов

## Типичные сценарии разработки

### Сценарий A: Полный CRUD экран

```
Запрос → Анализ → [vhm24-ux-spec] → Спецификация
                         ↓
              [vhm24-db-expert] → Схема таблицы
                         ↓
            [vhm24-api-generator] → tRPC роуты
                         ↓
             [vhm24-ui-generator] → Компоненты
                         ↓
               [vhm24-qa-review] → Готово!
```

**Шаги подробно:**

1. **vhm24-ux-spec** (30-60 мин)
   - Анализ похожих экранов в проекте
   - Определение структуры данных
   - Описание user journey
   - ASCII wireframe
   - Список компонентов

2. **vhm24-db-expert** (15-30 мин)
   - Проверка схемы в db/schema.ts
   - Добавление новых полей если нужно
   - Миграция базы данных

3. **vhm24-api-generator** (30-45 мин)
   - CRUD процедуры
   - Валидация Zod
   - Типы TypeScript

4. **vhm24-ui-generator** (60-90 мин)
   - Главный экран
   - Форма создания/редактирования
   - Таблица/список
   - Модальные окна

5. **vhm24-qa-review** (15-30 мин)
   - Проверка TypeScript
   - Соответствие дизайн-системе
   - Функциональность

---

### Сценарий B: Информационный дашборд

```
[vhm24-ux-spec] → Макет дашборда
       ↓
[vhm24-api-generator] → Агрегирующие запросы
       ↓
[vhm24-ui-generator] → Виджеты + графики
       ↓
[vhm24-qa-review] → Проверка
```

**Особенности:**
- Много recharts компонентов
- Агрегирующие SQL запросы
- Карточки статистики
- Фильтры по периоду

---

### Сценарий C: Детальный экран сущности

```
[vhm24-ux-spec] → Структура детального просмотра
       ↓
[vhm24-api-generator] → Получение связанных данных
       ↓
[vhm24-component-lib] → Кастомные компоненты
       ↓
[vhm24-ui-generator] → Tabs + секции
       ↓
[vhm24-qa-review] → Проверка
```

**Особенности:**
- Несколько вкладок (Tabs)
- Связанные данные (orders, logs, history)
- Действия (кнопки)
- Timeline/история

---

### Сценарий D: Форма с валидацией

```
[vhm24-ux-spec] → Поля и правила валидации
       ↓
[vhm24-api-generator] → Zod схемы + процедуры
       ↓
[vhm24-ui-generator] → React Hook Form + UI
       ↓
[vhm24-qa-review] → Проверка
```

**Особенности:**
- react-hook-form + zodResolver
- Сложная валидация
- Зависимые поля
- Условная логика

---

## Параллельные потоки

### Независимые компоненты

Когда можно распараллелить:

```
                    ┌→ [vhm24-component-lib] Header ─┐
                    │                                │
[vhm24-ux-spec] ────┼→ [vhm24-component-lib] Sidebar ┼→ [vhm24-ui-generator] → [vhm24-qa-review]
                    │                                │
                    └→ [vhm24-component-lib] Footer ─┘
```

### API и UI одновременно

После спецификации API и UI могут разрабатываться параллельно:

```
                    ┌→ [vhm24-api-generator] ─┐
[vhm24-ux-spec] ────┤                         ├→ Интеграция → [vhm24-qa-review]
                    └→ [vhm24-ui-generator] ──┘
                       (с mock данными)
```

---

## Критические точки

### Обязательные проверки

| После шага | Проверить |
|------------|-----------|
| vhm24-ux-spec | Спецификация утверждена пользователем |
| vhm24-db-expert | Миграция применена успешно |
| vhm24-api-generator | API отвечает без ошибок |
| vhm24-ui-generator | Экран рендерится без ошибок |
| vhm24-qa-review | Все пункты чеклиста пройдены |

### Точки возврата

При ошибке можно вернуться к:
- **vhm24-ux-spec** → Уточнить требования
- **vhm24-api-generator** → Изменить API контракт
- **vhm24-ui-generator** → Переделать компонент

---

## Оценка времени

| Тип задачи | Время |
|------------|-------|
| Простой экран (список) | 2-3 часа |
| CRUD экран | 4-6 часов |
| Дашборд | 4-8 часов |
| Сложный модуль | 8-16 часов |
| Полный flow (5+ экранов) | 2-5 дней |
