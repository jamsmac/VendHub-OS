apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "vendhub.fullname" . }}-config
  labels:
    {{- include "vendhub.labels" . | nindent 4 }}
data:
  NODE_ENV: {{ .Values.global.environment | quote }}
  TZ: "Asia/Tashkent"

  # API Configuration
  API_PORT: {{ .Values.api.service.port | quote }}
  API_PREFIX: "/api"

  # Database
  DB_HOST: "{{ .Release.Name }}-postgresql"
  DB_PORT: "5432"
  DB_NAME: {{ .Values.postgresql.auth.database | quote }}

  # Redis
  REDIS_HOST: "{{ .Release.Name }}-redis-master"
  REDIS_PORT: "6379"

  # URLs
  API_URL: "https://{{ .Values.ingress.hosts.api }}"
  WEB_URL: "https://{{ .Values.ingress.hosts.web }}"
  CLIENT_URL: "https://{{ .Values.ingress.hosts.client }}"

  # Feature Flags
  ENABLE_SWAGGER: {{ .Values.api.env.ENABLE_SWAGGER | default "true" | quote }}
  ENABLE_METRICS: {{ .Values.api.env.ENABLE_METRICS | default "true" | quote }}
  ENABLE_WEBSOCKET: "true"

  # Rate Limiting
  THROTTLE_TTL: "60"
  THROTTLE_LIMIT: "100"
